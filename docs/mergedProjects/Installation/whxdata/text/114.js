rh._.exports({"1":[["\n"],["\n"],["\n","Das Programm ruft zyklisch (10 Sekunden Raster) die Datenbankprozedur P_SYNC_SYSMODULE als Lifemeldung auf. Wenn diese Lifemeldung ausbleibt, verbucht die Datenbank eine Modulverbindungsstörung.","\n"],["\n","Das Programm überwacht das zyklische Eintreffen von Lebenstelegrammen der parametrierten Anzeigen (Anzeigen werden als Verbindungen vom Typ -2 unter dem Modul MediaServer parametriert). Bleibt das Lebenstelegramm einer Anzeige für mehr als 120 Sekunden aus wird für die Anzeige Verbindungsfehler in der Datenbank verbucht.","\n"],["\n","Die Reißleinenmeldungen werden zyklisch (1 Sekunden Raster) mit dem konfigurierten SQL Statement (Server.cfg) selektiert, das beispielsweise folgendermaßen lautetet:","\n","select a.ID, a.TIME_START, a.AL_TYPE, m.NODE, m.SYMBOL_1 as SYMBOL,","\n","l.NAME_0 as NODENAME from","\n","AL_PENDING a, AL_MESSAGE_ARCHIVE m, L_NODES l","\n","where","\n","a.TIME_END is NULL and","\n","a.AL_TYPE in(11, 12) and","\n","m.ID = a.MESSAGE and","\n","l.ID = m.NODE","\n"," ","\n","Der Select muss folgende Spalten liefern:","\n\n","ID","\n\n","TIME_START","\n\n","AL_TYPE","\n\n","NODE","\n\n","SYMBOL","\n\n","NODENAME","\n\n"," ","\n","Sofern eine \"neue\" Meldung gekommen wird, wird an alle Clients für die die Gruppe der Meldung parametriert ist, ein Telegramm zum Abspielen einer WAV-Datei gesendet.","\n","Bei Änderung am Meldungsstatus (Meldung kommt / geht) werden die zugehörigen Statusvariablen in der Datenbank aktualisiert. Dies erfolgt durch Aufrufe der Datenbankprozeduren gw_val_num_in bzw. gw_val_str_in.","\n"],["\n","Um beispielsweise Anzeigen einer Montagelinie automatisch starten und herunterfahren zu können werden Schaltbefehle der Tabelle P_OUT_VALUES zyklisch (10 Sekunden Raster) mit folgendem SQL Statement selektiert:","\n","select ID, VALUE_SYMBOL, VALUE_BOOL from","\n","P_OUT_VALUES","\n","where","\n","PROJECT_ID = ","<PID>"," and","\n","VALUE_FORMAT = 2 and","\n","TIME_STARTED >= TO_DATE('","<TS>","', 'DD.MM.YYYY HH24:MI:SS') and","\n","TIME_STARTED <= SYSDATE and","\n","VALUE_SYMBOL like '%.PRODSTATUS'","\n","order by TIME_STARTED","\n"," ","\n","Der Platzhalter <PID> wird durch die parametrierte ProjectId ersetzt.","\n","Der Platzhalter <TS> wird durch die Zeit des Programmstarts ersetzt.","\n","Sofern die Abfrage einen oder mehrere Datensätze liefert und der erste Teil des jeweiligen Variablensymbols mit dem Namen einer Montagelinie übereinstimmt, wird das entsprechende Skript zum Starten (VALUE_BOOL = 1) bzw. zum Herunterfahren (VALUE_BOOL = 0) der Anzeigen aufgerufen. Anschließend wird für jeden Datensatz die Datenbankprozedur gw_val_transmitted aufgerufen.","\n\n\n"]],"2":[["Funktion"]],"3":[["Rückmeldung an Datenbank"],["Verbindungsüberwachung"],["Selektion der Reißleinenmeldungen"],["Selektion von Schaltbefehlen"]],"4":[["Funktion"]],"id":"114"})