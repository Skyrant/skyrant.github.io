rh._.exports({"1":[["\n"],["\n","In our Tomcat configuration above, we are running Tomcat as Root.","\n","For security reasons, it is always best to run services with the only those privileges that are necessary.","\n","There are some who make a strong case that this is not required, but it's always best to err on the side of caution.","\n","To run Tomcat as non-root user, we need to do the following:","\n","1. Create the group 'tomcat':","\n"," [root@localhost ~]# groupadd tomcat","\n"," ","\n","2. Create the user 'tomcat' and add this user to the tomcat group we created above.","\n"," [root@localhost ~]# useradd -s /bin/bash -g tomcat tomcat","\n"," ","\n","The above will create a home directory for the user tomcat in the default user home as /home/tomcat","\n","If we want the home directory to be elsewhere, we simply specify so using the -d switch.","\n"," [root@localhost ~]# useradd -g tomcat -d /usr/share/apache-tomcat-7.0.42/tomcat tomcat","\n"," ","\n","The above will create the user tomcat's home directory as /usr/share/apache-tomcat-7.0.42/tomcat","\n","3. Change ownership of the tomcat files to the user tomcat we created above:","\n"," [root@srv6 ~]# chown -Rf tomcat.tomcat /usr/share/apache-tomcat-7.0.29/","\n"," ","\n","4. Adjust the start/stop service script we created above(/etc/init.d/tomcat). In our new script, we need to su to the user tomcat:","\n","#!/bin/bash","\n","# description: Tomcat Start Stop Restart","\n","# processname: tomcat","\n","# chkconfig: 234 20 80","\n","JAVA_HOME=/usr/java/jdk1.7.0_45","\n","export"," JAVA_HOME","\n","PATH=$JAVA_HOME/bin:$PATH","\n","export"," PATH","\n","CATALINA_HOME=/usr/share/apache-tomcat-7.0.42/","\n"," ","\n","case"," $1 ","in","\n","start)","\n","/bin/su tomcat $CATALINA_HOME/bin/startup.sh","\n",";;","\n","stop)","\n","/bin/su tomcat $CATALINA_HOME/bin/shutdown.sh","\n",";;","\n","restart)","\n","/bin/su tomcat $CATALINA_HOME/bin/shutdown.sh","\n","/bin/su tomcat $CATALINA_HOME/bin/startup.sh","\n",";;","\n","esac","\n","exit 0","\n"," ","\n\n\n"]],"2":[["Run Tomcat using Minimally Privileged (non-root) User"]],"4":[["Run Tomcat using Minimally Privileged (non-root) User"]],"id":"128"})