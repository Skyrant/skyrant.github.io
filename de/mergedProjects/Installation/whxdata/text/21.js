rh._.exports({"0":[["Konfiguration der Legato Webapplikation"]],"1":[["\n"],["\n",":","\n","Aufgrund der komplexen Parametrierung einer \n J2EE-Webanwendung und dem steigenden Variationsreichtum der Legato-Anwendung \n darf eine manuelle Konfiguration nur mit entsprechenden Kenntnissen der \n J2EE-Architektur und Legato erfolgen. ","\n"],["\n","Um die gelieferte War-Datei zu konfigurieren, \n muss sie entpackt werden.","\n","Zum Entpacken kann sie z.B. in eine ZIP-Datei \n umbenannt werden.","\n","Beim Entpacken ist darauf zu achten, dass die \n Ordnerstruktur erhalten bleibt.","\n","Die entpackten Ordner sind dann in das WebApps-Verzeichnis \n des Applikationsservers zu speichern (tomcat*\\webapps).","\n"],["\n","Wenn Dateien manuell bearbeitet werden, ist darauf \n zu achten, dass deren Format nicht verändert wird.","\n","Die Parametrierung der Webanwendung erfolgt über \n die Datei /WEB-INF/web.xml.","\n","Die Funktion der Parameter ist in dem Dokument \n Legato_System_Parameters beschrieben.","\n","Im Folgenden wird nur vorgestellt, wie eine DB-Verbindung \n und elementare Pfade eingestellt werden. Eine tiefgreifende Parametrierung \n erfolgt im Rahmen der Projektierungsarbeit.","\n"],["\n","Es wird empfohlen, einen Datenbank-Pool über den Web-Application-Server \n zur Verfügung zu stellen. Für Legato müssen in der web.xml dafür folgende \n Parameter angepasst werden.","\n","Context- Parameter DbType","\n","Datenbanktyp MSSQL oder ORACLE","\n"," ","\n","Folgende Parameter definieren die Verlinkung der Datenbank-Ressource \n auf die in Legato verwendeten Zugriffe. Der Name von res-ref-name wird \n mit dem entsprechenden Pool verlinkt (z.B. mit JNDI (Container)=jdbc/LegatoDB \n (zu suchender DB-Name)). Eine genauere Beschreibung findet sich auch im \n Dokument Legato_System_Parameters.","\n","Context-Parameter DbOper","\n","Setzen der Datenbankverbindung zur operativen \n DB, z.B.: JNDI=jdbc/LegatoAct ","\n","Context-Parameter DbArch","\n","Setzen der Datenbankverbindung zur Archiv-DB, \n z.B.: JNDI=jdbc/LegatoArc","\n","für 1-DB Systeme sollte der Parameter folgendermaßen \n gesetzt werden:","\n","CfgRef=DbOper (d.h.: \"siehe Konfiguration \n von\"=\"zu suchender Name\" à in diesem Fall wird also für \n die Archiv-DB die Konfiguration der operativen DB verwendet)","\n"],["\n","Es empfiehlt sich, die Datenbank-Verbindung über einen \n kontextabhängigen Parameter einzustellen. Der Vorteil ist, dass die web.xml \n nicht mehr jedes Mal angepasst werden muss, sondern die umgebungsabhängigen \n Parameter aus der Konfigurationsdatei {WEB_CONTEXT}.xml (meist Legato.xml) \n gezogen werden.","\n",":","\n","In Tomcat 6.0.30 - 6.0.32, 7.0.0-7.0.9 funktioniert \n dies nicht!","\n","Wenn die Datenbank-Verbindung über einen kontext-abhängigen \n Parameter erfolgen soll, dann muss in der web.xml eine Referenz wie folgt \n angegeben werden:","\n"," <resource-ref id=\" LegatoAct_ResourceRef \n \">","\n","      <description>Database \n connection for Legato online database</description>","\n","      <res-ref-name>jdbc/LegatoAct</res-ref-name>","\n","      <res-type>javax.sql.DataSource</res-type>","\n","      <res-auth>Container</res-auth>","\n","    </resource-ref>","\n","<resource-ref id=\" LegatoArc_ResourceRef \">","\n","      <description>Database \n connection for Legato offline database</description>","\n","      <res-ref-name>jdbc/LegatoArc</res-ref-name>","\n","      <res-type>javax.sql.DataSource</res-type>","\n","      <res-auth>Container</res-auth>","\n","    </resource-ref>","\n"," ","\n",":","\n","Handelt es sich um eine 1-DB Installation, \n muss der zweite Eintrag (für die Archiv-DB) weggelassen werden. Andernfalls \n kann die WebApp nicht gestartet werden.","\n","Die entsprechende Konfiguration in der {WEB_CONTEXT}.xml \n ist wie folgt (wichtig ist dabei, dass der Name mit dem res-ref-name aus \n der web.xml übereinstimmt):","\n","INFO:","\n","Dieses Beispiel ist eine xml-Datei mit Tomcat \n 7. Mit Tomcat 8 haben sich einige Parameter geändert, so dass die Datei \n dann anders aussieht. Ein Beispiel dafür finden Sie weiter unten.","\n","<Context>","\n","<Resource","\n","name=\"jdbc/LegatoAct\"","\n","auth=\"Container\"","\n","type=\"javax.sql.DataSource\"","\n","driverClassName=\"oracle.jdbc.driver.OracleDriver\"","\n"," ","\n","username=\"legato_read\"","\n","password=\"legato_read\"","\n","url=\"jdbc:oracle:thin:@localhost:1521:LEGATO \n online database\"","\n","maxWait=\"5000\"","\n","removeAbandoned=\"true\"","\n","maxActive=\"4\"","\n","maxIdle=\"2\"","\n","removeAbandonedTimeout=\"60\"","\n","logAbandoned=\"true\" \n />","\n","<Resource","\n","name=\"jdbc/LegatoArc\"","\n","auth=\"Container\"","\n","type=\"javax.sql.DataSource\"","\n","driverClassName=\"oracle.jdbc.driver.OracleDriver\"","\n","username=\"legato_read\"","\n","password=\"legato_read\"","\n","url=\"jdbc:oracle:thin:@localhost:1521:LEGATO \n offline database\"","\n","maxWait=\"5000\"","\n","removeAbandoned=\"true\"","\n","maxActive=\"4\"","\n","maxIdle=\"2\"","\n","removeAbandonedTimeout=\"60\"","\n","logAbandoned=\"true\" \n />","\n","</Context>","\n"," ","\n","TIPP:","\n","Handelt es sich um eine 1-DB Installation \n empfiehlt es sich, in die context.xml folgende Parameter mit aufzunehmen, \n sodass keine Änderungen an der web.xml nötig sind:","\n","<Parameter name=\"dboper\" value=\"JNDI=jdbc/LegatoAct\"  override=\"false\"/>","\n","<Parameter name=\"dbarch\" value=\"JNDI=jdbc/LegatoAct\"  override=\"false\"/>","\n","In diesem Fall ist nur die Ressource der Operativ-Datenbank \n zu definieren, der zweite Eintrag kann entfallen.","\n","Sofern im Verzeichnis ${TOMCAT_HOME}\\webapps\\Legato\\META-INF \n die Datei {WEB_CONTEXT}.xml vorhanden ist, kopiert Tomcat sie automatisch \n in das Verzeichnis ${TOMCAT_HOME}\\conf\\Catalina\\localhost. Sofern Änderungen \n an der Datei vorgenommen werden, sollte die WebApp neu deployed werden, \n da sonst die Änderungen nicht übernommen werden.","\n"],["\n","Ab Version 8 benutzt Tomcat eine neue Version des Datenbank-Pools. \n Dadurch haben sich einige Parameter geändert. Ein Beispiel für die neuen \n Parameter sieht so aus:","\n","<Resource","\n","        name=\"jdbc/legato\" \n ","\n","        auth=\"Container\" \n ","\n","        type=\"javax.sql.DataSource\" \n ","\n","        driverClassName=\"oracle.jdbc.driver.OracleDriver\"","\n","        url=\"jdbc:oracle:thin:@172.21.5.0:1521:DEV11DBO\"","\n","        username=\"LEGATO_WRITE\"","\n","        password=\"LEGATO_WRITE\"","\n","        connectionProperties=\"v$session.program=Legato \n Webapp;\"","\n","        connectionInitSqls=\"alter \n session set current_schema = LEGATO_OWNER\"","\n","        defaultCatalog=\"\"","\n","        defaultAutoCommit=\"true\"","\n","        defaultReadOnly=\"false\"","\n","        defaultTransactionIsolation=\"READ_COMMITTED\"","\n","        ","\n","        initialSize=\"2\"","\n","        maxTotal=\"10\" \n ","\n","        maxIdle=\"5\" \n ","\n","        minIdle=\"0\" \n ","\n","        maxWaitMillis=\"15000\"","\n","        ","\n","        validationQuery=\"SELECT \n 1 FROM DUAL\"","\n","        validationQueryTimeout=\"1500\" \n ","\n","        testOnCreate=\"false\"","\n","        testOnBorrow=\"true\" \n ","\n","        testOnReturn=\"false\"","\n","        testWhileIdle=\"false\"","\n","        timeBetweenEvictionRunsMillis=\"-1\"","\n","        numTestsPerEvictionRun=\"3\"","\n","        minEvictableIdleTimeMillis=\"1800000\"","\n","        removeAbandonedOnBorrow=\"true\"","\n","        removeAbandonedOnMaintenance=\"false\"","\n","        removeAbandonedTimeout=\"900\"","\n","        logAbandoned=\"true\"","\n","        poolPreparedStatements=\"false\"","\n","        maxOpenPreparedStatements=\"-1\"","\n","        accessToUnderlyingConnectionAllowed=\"false\" \n ","\n","/>","\n"," ","\n",":","\n","Unbedingt zu beachten ist, dass der Parameter \n maxActive, der die Größe der Pools angibt, nun zu maxTotal umbenannt wurde. \n Ansonsten sind alle Pools 8 Verbindungen groß.","\n"],["\n","context-param-Parameter DefaultView","\n","Setzen der Standardansicht (Beispiel Visu: \n Visu/fs/Start.svg)","\n"," ","\n","Es empfiehlt sich, die Reports und Visualisierungen \n an einem anderen Ort zu speichern, um eventuelle Anpassungen daran nicht \n bei jedem Update der WebApp zu überschreiben. Die korrekten Verzeichnispfade \n müssen in den folgenden Parametern angegeben werden.","\n","context-param-Parameter ReportOutputPath","\n","Pfadangabe, unter der die AppEngine die generierten \n Berichte speichert","\n","…\\<Server>\\Legato\\uploads\\reports","\n","context-param-Parameter Uploadpath","\n","Pfadangabe, unter der hochgeladene Dateien, \n wie Visu- und Report-Dateien gespeichert werden","\n","…\\<Server>\\Legato\\uploads\\","\n"],["\n","Für das Logging von Meldungen aus der WebApp wird Log4j2 \n verwendet. Es wird eine vorkonfigurierte Datei log4j2.xml unter WEB-INF/classes \n mit ausgeliefert. Diese Datei kann beispielsweise so aussehen:","\n","<?xml version=\"1.0\" encoding=\"UTF-8\"?>","\n","<Configuration monitorInterval=\"30\" status=\"WARN\">","\n","          <Filters>","\n","                         <RegexFilter \n regex=\"(?is).*ORA-01013:.*\" useRawMsg=\"false\" onMatch=\"DENY\" \n onMismatch=\"NEUTRAL\"/>","\n","<!-- Markers used \n in Legato web application as reference for using them to filter log messages","\n","                         <MarkerFilter \n marker=\"exceptions\"     onMatch=\"NEUTRAL\" \n onMismatch=\"NEUTRAL\" />","\n","                         <MarkerFilter \n marker=\"init\"           onMatch=\"NEUTRAL\" \n onMismatch=\"NEUTRAL\" />","\n","                         <MarkerFilter \n marker=\"SQL\"            onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"Query\"          onMatch=\"NEUTRAL\" \n onMismatch=\"NEUTRAL\" />","\n","                         <MarkerFilter \n marker=\"VisuPolling\"    onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"AlarmPolling\"   onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"VisuRefresh\"    onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"AlarmRefresh\"   onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"VisuCompiler\"   onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"LegatoState\"    onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"DbCache\"        onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"WebServiceCall\" onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"MesTermMsg\"     onMatch=\"NEUTRAL\" \n onMismatch=\"NEUTRAL\" />","\n","                         <MarkerFilter \n marker=\"MesTermErr\"     onMatch=\"NEUTRAL\" \n onMismatch=\"NEUTRAL\" />","\n","                         <MarkerFilter \n marker=\"Other\"          onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","                         <MarkerFilter \n marker=\"Paging\"         onMatch=\"DENY\"    onMismatch=\"NEUTRAL\" \n />","\n","-->","\n","          </Filters>","\n","          <Appenders>","\n","                         <Servlet \n name=\"server\">","\n","                                        <PatternLayout \n charset=\"UTF-8\">","\n","                                                       <Pattern>[%marker] \n %-5level %logger{1} - %message%throwable</Pattern>","\n","                                        </PatternLayout>","\n","                         </Servlet>","\n","<!-- Example for logging \n directly to files, instead of through the servlet engine","\n","                         <RollingRandomAccessFile \n name=\"logfile\"","\n","                                                       fileName=\"webapp.log\" \n filePattern=\"webapp.%i.log\"","\n","                                                       immediateFlush=\"false\" \n append=\"true\">","\n","                                        <Policies>","\n","                                                       <OnStartupTriggeringPolicy \n />","\n","                                                       <SizeBasedTriggeringPolicy \n size=\"10 MB\" />","\n","                                        </Policies>","\n","                                        <DefaultRolloverStrategy \n min=\"1\" max=\"9\" />","\n","                                        <PatternLayout \n charset=\"UTF-8\">","\n","                                                       <Pattern>%date{DEFAULT} \n [%marker] %-5level %logger{1} - %message%n%throwable</Pattern>","\n","                                        </PatternLayout>","\n","                         </RollingRandomAccessFile>","\n","                         <RollingRandomAccessFile \n name=\"errfile\"","\n","                                                      "," ","fileName=\"webapperr.log\" filePattern=\"webapperr.%i.log\"","\n","                                                      "," ","immediateFlush=\"false\" append=\"true\">","\n","                                        <ThresholdFilter \n level=\"WARN\" onMatch=\"ACCEPT\" onMismatch=\"DENY\" \n />","\n","                                        <Policies>","\n","                                                       <SizeBasedTriggeringPolicy \n size=\"10 MB\" />","\n","                                        </Policies>","\n","                                        <DefaultRolloverStrategy \n min=\"1\" max=\"9\" />","\n","                                        <PatternLayout \n charset=\"UTF-8\">","\n","                                                       <Pattern>%date{DEFAULT} \n [%marker] %-5level %logger{1} - %message%n%throwable</Pattern>","\n","                                        </PatternLayout>","\n","                         </RollingRandomAccessFile>","\n"," -->","\n","          </Appenders>","\n","          <Loggers>","\n","                         <AsyncRoot \n level=\"trace\" includeLocation=\"false\">","\n","                                        <AppenderRef \n ref=\"server\" />","\n","<!--","\n","                                        <AppenderRef \n ref=\"logfile\" />","\n","                                        <AppenderRef \n ref=\"errfile\" level=\"WARN\"/>","\n"," -->","\n","                         </AsyncRoot>","\n","                         <AsyncLogger \n name=\"de.gefasoft.legato.webapp.util.db.QueryWaitWatcher\" level=\"warn\"/>","\n","          </Loggers>","\n","</Configuration>","\n"," ","\n","Standardmäßig wird der Appender \"Servlet\" \n benutzt. Dieser gibt die Logmeldungen weiter an die Servlet Engine, wo \n sie verarbeitet werden.","\n","Unter \"Filters\" sollte auf jeden Fall der \n Eintrag \"RegexFilter\" beibehalten werden. Dieser filtert die \n Oracle-Fehlermeldungen raus, wenn der Benutzer eine Aktion abgebrochen \n hat (z.B. das Laden einer Seite).","\n","Unter \"Marker\" sind die Logging-Kategorien \n aufgeführt, die vor Legato Version 4.6 in der WebApp unter dem Menüpunkt \n WebStatus einstellbar waren. Folgende Einstellungen sind möglich:","\n","NEUTRAL = andere Einstellung (z.B. von \"AsyncRoot\") \n nicht überschreiben","\n","DENY = nichts loggen","\n","ACCEPT = immer loggen","\n"," ","\n","Mit Log4j2 ist es nun auch möglich, die Log-Meldungen \n mittels \"RandomAccessFile\" in Dateien zu schreiben.","\n",":","\n","GEFASOFT rät von diesem Vorgehen ab!","\n","Der entsprechende Teil ist in der Beispieldatei auskommentiert.","\n"],["\n","Die Installation erfolgt entsprechend dem jeweiligen \n Web-Application-Server unterschiedlich. Die entpackten Dateien können \n über das Jar-Tool von Java wieder zu einer War-Datei gepackt werden.","\n\n\n"]],"3":[["Konfiguration der Legato Webapplikation"]],"6":[["Vorbereitung"],["Konfiguration \n der Legato Webapplikation"],["Konfiguration \n der Datenbankverbindung"],["Kontextabhängige \n Parameter Tomcat 8"],["Grundlegende \n (Pfad-)Einstellungen"],["Logging"],["Installation"]],"7":[["Datenbankverbindung \n als kontextabhängiger Parameter"]],"id":"21"})