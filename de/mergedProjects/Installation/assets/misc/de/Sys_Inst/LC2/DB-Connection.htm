<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="OriginalFile" content="Legato_System_Installation_de.docx" />
<meta http-equiv="Content-Language" content="de-DE" />
<meta name="build tags" content="Deutsch,Classic_only" />
<meta name="generator" content="Adobe RoboHelp 2017" />
<title>Herstellen der Datenbankverbindung</title>
<link rel="stylesheet" href="../../../Legato_Systemdokumentation.css" type="text/css" />
<style type="text/css">/*<![CDATA[*/
body {
	background-color: #ffffff;
}
A:visited {
	
}
A:link {
	
}
/*]]>*/</style>
</head>

<body>
<h2>Herstellen der Datenbankverbindung</h2>
<h3><a name="Verbindung_zu_Oracle" id="Verbindung_zu_Oracle"></a>Verbindung 
 zu Oracle</h3>
<p class="BodyText">Bis LC2-Version 2.0.0.0: Zur Kommunikation mit der 
 Datenbank muss mindestens Oracle Data Access Components (ODAC) 11.2.0.2.1 
 installiert sein (siehe Systemvoraussetzungen).</p>
<p class="BodyText">Ab LC2-Version 2.0.0.0: Keine bestimmten Oracle-Driver 
 notwendig.</p>
<h3><a name="Verbindung_konfigurieren" id="Verbindung_konfigurieren"></a>Verbindung 
 konfigurieren</h3>
<p class="BodyText">Nach Start des LC2 erscheint ein Dialog zum Einrichten 
 beliebig vieler Datenbankverbindungen / Repositories. Die Verbindungsherstellung 
 erfolgt in zwei Schritten.</p>
<p class="BodyText">Zunächst wird ein neues Repository angelegt (Create 
 New …). </p>
<p class="BodyText"><img src="../../../Images/Sys_Inst/image016.png" alt="" 
						 width="370" height="400" border="0" /></p>
<p class="BodyText">Es öffnet sich folgender Dialog:</p>
<p class="BodyText"><img src="../../../Images/Sys_Inst/image018.png" alt="" 
						 width="400" height="364" border="0" />&#160;</p>
<p class="Textkörperfett">Name</p>
<p class="BodyText">Der Name kann frei gewählt werden, muss jedoch eindeutig 
 sein.</p>
<p class="Textkörperfett">Sortiernummer</p>
<p class="BodyText">Der Sortiernummer kann frei gewählt werden, muss jedoch 
 eindeutig sein.</p>
<p class="Textkörperfett">Provider</p>
<p class="BodyText">Datenbank-Provider, z.B. ODAC. Wird nach Eingabe des 
 Legato Connection Strings automatisch befüllt.</p>
<p class="Textkörperfett">Connection String</p>
<p class="BodyText">Nun muss die Datenbankverbindung definiert werden. 
 Klicken Sie dazu auf die drei Punkte (…) neben &quot;Legato Verbindungs-String&quot;. 
 Es erscheint ein Dialog zur Eingabe der Verbindungseinstellungen.</p>
<p class="BodyText"><img src="../../../Images/Sys_Inst/image020.png" alt="" 
						 width="340" height="319" border="0" /></p>
<p class="BodyText">Zunächst kann hier die Datenquelle oder der gewünschte 
 Treiber (Provider) durch Klick auf &quot;Ändern...&quot; selektiert werden:</p>
<p class="BodyText"><img src="../../../Images/Sys_Inst/LC2_provider.png" 
						 alt="" border="0" /></p>
<p class="BodyText">Bei Auswahl des &quot;Managed Data Providers&quot; 
 muss kein ODAC mehr installiert werden. Der Eintrag &quot;Unmanaged Data 
 Provider&quot; wird ohnehin nur angeboten, wenn ODAC auf dem PC installiert 
 ist.</p>
<p class="BodyText">Nach Übernehmen der Auswahl kann der Servername sowie 
 ein Datenbankbenutzer eingegeben werden. Die notwendigen Einstellungen 
 sind abhängig von Datenbanksystem und –version. In der Regel besteht ein 
 Servername aus der IP-Adresse, einem Port und dem Namen der Datenbank 
 (z.B. 192.168.1.16:1521/Legato).</p>
<p class="BodyText">Es ist auch möglich, den Eintrag aus der TNSNAMES.ora 
 als Servername einzutragen, z.B.</p>
<p class="BodyText"><img src="../../../Images/Sys_Inst/image021.png" alt="" 
						 width="600" height="199" border="0" /></p>
<p class="BodyText">Wird auf dem System Data Guard eingesetzt, so muss 
 sich der LC2 zu zwei Datenbanken gleichzeitig verbinden (Primär- und Standby-Datenbank), 
 die auf zwei verschiedenen Servern laufen. Hierfür kann der String beispielsweise 
 so aussehen:</p>
<p class="BodyText">(DESCRIPTION=(ADDRESS_LIST=(LOAD_BALANCE=FALSE)(FAILOVER=TRUE)(ADDRESS=(PROTOCOL=TCP)(HOST=db-server-1)(PORT=1521))(ADDRESS=(PROTOCOL=TCP)(HOST=db-server-2)(PORT=1521)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=LEGATO)))</p>
<p class="BodyText">Bei der Verbindungskonfiguration muss der Benutzername 
 und Kennwort angegeben werden. Dabei ist ein Datenbankbenutzer zu wählen, 
 der vom Systemadministrator der Datenbank angelegt wurde. Dieser Benutzer 
 kann mit minimalen Rechten auf Datenbankseite ausgestattet sein. Die eigentliche 
 Benutzeranmeldung an Legato erfolgt dann einmalig mit dem im LC2 angelegten 
 Benutzernamen und Kennwort. Die Rechte dieses spezifischen Legato-Benutzers 
 sind in der Benutzerverwaltung des LC2 festgelegt.</p>
<p class="BodyText">Nach einer Neuinstallation der SQL-Datenbank ist ein 
 Benutzer &quot;gefasoft&quot; mit dem Kennwort &quot;gefasoft&quot; als 
 Administrator eingerichtet. Nach der Einrichtung der Verbindung kann die 
 Verbindung getestet werden.</p>
<p class="Textkörperfett">Developer Mode</p>
<p class="BodyText">Wird diese Checkbox aktiviert, so wird der LC2 im Entwicklermodus 
 geöffnet. Hier stehen dem Anwender weitere Entwickler-Tools und Customizing-Optionen 
 zur Verfügung. Hat der Benutzer nicht das benötigte Recht, wird der LC2 
 mit dieser Verbindung nicht gestartet und es wird eine entsprechende Fehlermeldung 
 ausgegeben. Die Checkbox kann auch beim späteren Editieren von Verbindungen 
 gesetzt werden.</p>
<p class="Textkörperfett">Lokales Repository erzwingen</p>
<p class="BodyText">Für diese Checkbox, siehe bitte die Beschreibung unter 
 <a href="DB-Connection.htm#Zentrales_Repository">Zentrales Repository 
 - Lokales Repository erzwingen</a>.</p>
<h3><a name="Emergency_Access"></a>Emergency Access</h3>
<p class="BodyText">In vielen Fällen erfolgt die Benutzerprüfung im LC2 
 über einen externen Authentifizierungs-Service (LDAP, Authentifizierung 
 via Webapp, Authentifizierung via SapientEngine). Für den Fall, dass der 
 verwendete Authentifizierungs-Service nicht erreichbar ist, wird ein Notfall-Login 
 auf Datenbankebene ermöglicht. Dabei erfolgt die Anmeldung nicht mit einer 
 spezifischen Benutzerkennung, sondern mit einem geeigneten Datenbankbenutzer.</p>
<p class="BodyText">Zum Einrichten des Emergency-Access müssen folgende 
 Schritte durchgeführt werden.</p>
<p class="BodyText">1. Gegebenenfalls eine neue Verbindung im Repositories-Dialog 
 anlegen. Dieser Schritt kann entfallen; der Emergency-Access kann auch 
 für eine bestehende Verbindung erstellt werden.</p>
<p class="BodyText">2. Öffnen Sie die Datei &quot;Gobal.config&quot;. Die 
 Datei liegt unter %AppData% - Roaming\Gefasoft\GraphPic10. Darin sind 
 alle angelegten Repositories eingetragen. Suchen Sie den Eintrag für die 
 gewünschte Verbindung und ändern Sie den Eintrag bei &quot;Authentication 
 Type&quot;&#160;von &quot;getTypeFromSysParams&quot; in &quot;EmergencyAccess&quot;, 
 z.B: </p>
<p class="TextCode">&lt;add name=&quot;Legato&quot; sortId=&quot;17&quot; 
 provider=&quot;Oracle.DataAccess.Client&quot; connectionString=&quot;...&quot;, 
 password=&quot;...&quot; authenticationType=&quot;EmergencyAccess&quot; 
 /&gt;</p>
<p class="TextCode">&#160;</p>
<p class="BodyText">3. Starten Sie den LC2. Bei Auswahl der geänderten 
 Verbindung wird nun nicht mehr der gewohnte Dialog zum Anmelden angezeigt. 
 Stattdessen muss die Anmeldung mit einem entsprechend privilegierten Datenbank-Benutzer 
 (z.B. OWNER) erfolgen.</p>
<p class="Textkörperfett"><img src="../../../02_Hinweis_de.jpg" alt="" 
								 style="border: none;" border="0" />:</p>
<p class="TextkörperHinweis">Normalerweise erfolgt im LC2 nach erfolgreicher 
 Benutzerprüfung intern ein Upgrade des DB-Benutzers auf einen Benutzer 
 mit unbeschränkten Datenbank-Schreibrechten. Dieses Berechtigungsupgrade 
 wird bei dem &quot;Emergency Login&quot; nicht ausgeführt! Damit wird 
 erreicht, dass insbesondere Konfigurationsänderungen nur möglich sind, 
 sofern der Login mit einem Datenbankbenutzer mit ausreichend hohen Datenbankberechtigungen 
 erfolgt.</p>
<h3><a name="Festlegen_der_DB-Verbindung_als_Startparameter" id="Festlegen_der_DB-Verbindung_als_Startparameter"></a>Festlegen 
 der DB-Verbindung als Startparameter</h3>
<p class="BodyText">Nachdem die benötigten Datenbankverbindungen einmalig 
 angelegt wurden, können diese auch direkt als Startparameter der LC2-Verknüpfung 
 übergeben werden. Dazu geht man folgendermaßen vor:</p>
<?rh-list_start class="Liste1neu" style="list-style: rh-list; list-style: rh-list;" ?><p 
	 class="Aufzählung1">benötigte Anzahl Verknüpfungen der LC2.exe (Gefasoft.Legato.LegatoConfigurationCenter.exe) 
 auf dem Desktop ablegen (pro Verbindung wird eine Verknüpfung benötigt)</p><?rh-list_end ?>
<?rh-list_start class="Liste1neu" style="list-style: rh-list; list-style: rh-list;" ?><p 
	 class="Aufzählung1">Rechtsklick auf die Verknüpfung – Eigenschaften</p><?rh-list_end ?>
<?rh-list_start class="Liste1neu" style="list-style: rh-list; list-style: rh-list;" ?><p 
	 class="Aufzählung1">Im Reiter &quot;Verknüpfung&quot; in der Zeile 
 &quot;Ziel&quot; am Ende des dort eingetragenen Pfads folgende Eingabe 
 machen: Leerzeichen/repository=&quot;Name der Datenbankverbindung&quot;</p><?rh-list_end ?>
<p class="TextCode">So könnte der Eintrag unter &quot;Ziel&quot; jetzt 
 aussehen:<br />
&quot;C:\Program Files (x86)\Gefasoft\LC2\Gefasoft.Legato.LegatoConfigurationCenter.exe&quot; 
 /repository=&quot;DEV11&quot;</p>
<p class="BodyText">&#160;</p>
<p class="BodyText">Jetzt wird diese Datenbankverbindung automatisch geladen, 
 wenn das LC2 über die Verknüpfung geöffnet wird.</p>
<h3><a name="Zentrales_Repository"></a>Zentrales Repository</h3>
<h4>Ablauf</h4>
<p class="BodyText">Standardmäßig wird eine zur Installation des LC2 passende 
 Version des Repository mit dem Setup ausgeliefert. Dieses Repository (Template.sdf) 
 wird unter C:\ProgramData\Gefasoft\GraphPic10 abgelegt. Beim Verbinden 
 zu einer Datenbank prüft der LC2 nun zuerst, ob bereits ein Repository 
 in der Datenbank vorhanden ist (die Struktur hierfür existiert erst seit 
 Legato Version 4.6.1.2). Findet der LC2 ein Repository in der DB, so verwendet 
 er dies. Findet er dort keines, verwendet er die lokal gespeicherte .sdf-Datei. 
 Da die Repository-Strukturen initial nicht befüllt sind, wird standardmäßig 
 das lokale Repository verwendet. Sobald das lokale Repository in die Datenbank 
 kopiert wurde (über den Repository-Dialog im LC2 unter System-Administration 
 - Systemeinstellungen - Repository), wird dieses verwendet und muss ggf. 
 regelmäßig aktualisiert werden.</p>
<h4>Repository-Abgleich lokal und zentral</h4>
<p class="BodyText">Ist das lokale Repository aktueller als das zentrale 
 in der DB, so sollte nach dem Update des LC2 der Repository-Dialog unter 
 System-Administration - Systemeinstellungen - Repository aufgerufen werden 
 und über diesen das Repository in der DB aktualisiert werden. Dies sollte 
 sinnvollerweise durch einen Administrator durchgeführt werden, bevor die 
 übrigen User den LC2 verwenden. Sobald das zentrale Repository in der 
 DB aktualisiert wurde, steht diese Version allen Benutzern zur Verfügung. 
 Siehe hierzu auch das entsprechende Kapitel in der LC2-Onlinehilfe.</p>
<h4>Lokales Repository erzwingen</h4>
<p class="BodyText">Auch nachdem ein zentrales Repository eingerichtet 
 wurde, ist es möglich, das lokale Repository zu verwenden. Dies kann nötig 
 sein, um zum Beispiel eine aktuelle LC2-Version zu verwenden, obwohl die 
 Datenbank einen älteren Stand hat, oder um einen Rollback auf eine ältere 
 LC2-Version zu erzwingen. Dazu muss die entsprechende Datenbank-Verbindung 
 nach dem Start des LC2 neu angelegt werden.</p>
<p class="BodyText">Vergeben Sie einen Namen für die Verbindung und tragen 
 Sie den entsprechenden Verbindungspfad ein. Dann setzen Sie das Häkchen 
 &quot;Lokales Repository erzwingen&quot;.</p>
<p class="BodyText"><img src="../../../Images/Sys_Inst/image1.gif" alt="" 
						 style="border: none;" border="0" /></p>
<p class="Textkörperfett"><img src="../../../02_Hinweis_de.jpg" alt="" 
								 style="border: none;" border="0" />: </p>
<p class="TextkörperHinweis">Diese Checkbox steht nur bei der Neuanlage 
 von Verbindungen zur Verfügung, nicht beim Editieren bestehender Verbindungen!</p>
<p class="BodyText">Nun können Sie sich an dieser Verbindung anmelden und 
 es wird, unabhängig von der Repository-Version in der Datenbank, das lokale 
 Repository verwendet.</p>
<h3><a name="Ablage_der_Verbindungseinstellungen_auf_Netzlaufwerk" id="Ablage_der_Verbindungseinstellungen_auf_Netzlaufwerk"></a>Ablage 
 der Verbindungseinstellungen auf Netzlaufwerk</h3>
<p class="BodyText">Die im Netzwerk liegende Config wird als Fallback für 
 die lokale Config verwendet. Somit sind die dort abgelegten Verbindungen 
 beim Start sichtbar. Wenn diese jedoch geändert oder gelöscht werden, 
 wirkt sich das nicht auf die im Netzwerk liegende Config aus, sondern 
 wird nur lokal persistiert.</p>
<p class="Textkörperfett"><img src="../../../02_Hinweis_de.jpg" alt="" 
								 style="border: none;" border="0" />:</p>
<p class="TextkörperHinweis">Die Konfiguration dieses Features erfordert 
 fortgeschrittene Kenntnisse und darf daher nur von Administratoren oder 
 Power Usern durchgeführt werden.</p>
<p class="BodyText">Zuerst muss in das gewünschte Netzwerkverzeichnis eine 
 Config mit Verbindungseinstellungen abgelegt werden. Als Vorlage hierfür 
 eignet sich die lokale Config, die unter</p>
<p class="TextCode">%APPDATA%\Gefasoft\GraphPic10\Global.config</p>
<p class="TextCode">&#160;</p>
<p class="BodyText">liegt. Diese kann zuerst über den Repository-Dialog 
 des LC2 entsprechend gepflegt werden (siehe Kapitel &quot;Verbindung konfigurieren&quot;).</p>
<p class="BodyText">Dann muss auf diese neue Netzwerk-Config verwiesen 
 werden. Das kann entweder für den aktuellen User erfolgen</p>
<p class="TextCode">%APPDATA%\Gefasoft\GraphPic10\Global.config</p>
<p class="TextCode">&#160;</p>
<p class="BodyText">oder für den lokalen Rechner</p>
<p class="TextCode">%ProgramFiles(x86)%\Gefasoft\LC2\Gefasoft.Legato.LegatoConfigurationCenter.exe.config</p>
<p class="TextCode">&#160;</p>
<p class="BodyText">In dieser Datei muss das XML-Element &quot;graphPic&quot; 
 um das Attribute &quot;sharedConfigFilePath&quot; erweitert werden, dessen 
 Wert den Pfad zur Netzwerk-Config beinhaltet.</p>
<p class="BodyText">Beispiel:</p>
<p class="TextCode">&lt;graphPic sharedConfigFilePath=&quot;\\ar-datastore\try\LC2\Shared.config&quot;&gt;</p>
<p class="TextCode">&#160;</p>
<p class="Textkörperfett"><img src="../../../02_Hinweis_de.jpg" alt="" 
								 style="border: none;" border="0" />:</p>
<p class="TextkörperHinweis">In der Netzwerk-Config dürfen sich nur Verbindungen 
 zu zentralen Repositories befinden, die in der Legato Datenbank abgelegt 
 sind. Verbindungen zu SQL Compact Repositories (.sdf-Datei) werden nicht&#160;&#160;unterstützt. 
 Siehe hierzu auch <a href="#Zentrales_Repository">Zentrales Repository</a>.</p>
<p class="BodyText">Wenn ein Benutzer eine Verbindung, die aus einer Netzwerk-Config 
 stammt, abändert, so wird er von diesem Zeitpunkt an eine lokale Kopie 
 dieser Verbindung sehen.</p>
</body>
</html>
